(this.webpackJsonpverification=this.webpackJsonpverification||[]).push([[0],{131:function(e,t){},136:function(e,t){},154:function(e,t,i){},155:function(e,t,i){},156:function(e,t,i){},158:function(e,t,i){},159:function(e,t,i){},184:function(e,t,i){},201:function(e,t){},211:function(e,t){},221:function(e,t){},222:function(e,t){},247:function(e,t){},248:function(e,t){},249:function(e,t){},255:function(e){e.exports=JSON.parse('{"@context":{"@version":1.1,"@protected":true,"id":"@id","type":"@type","VerifiableCredential":{"@id":"https://www.w3.org/2018/credentials#VerifiableCredential","@context":{"@version":1.1,"@protected":true,"id":"@id","type":"@type","cred":"https://www.w3.org/2018/credentials#","sec":"https://w3id.org/security#","xsd":"http://www.w3.org/2001/XMLSchema#","credentialSchema":{"@id":"cred:credentialSchema","@type":"@id","@context":{"@version":1.1,"@protected":true,"id":"@id","type":"@type","cred":"https://www.w3.org/2018/credentials#","JsonSchemaValidator2018":"cred:JsonSchemaValidator2018"}},"credentialStatus":{"@id":"cred:credentialStatus","@type":"@id"},"credentialSubject":{"@id":"cred:credentialSubject","@type":"@id"},"evidence":{"@id":"cred:evidence","@type":"@id"},"expirationDate":{"@id":"cred:expirationDate","@type":"xsd:dateTime"},"holder":{"@id":"cred:holder","@type":"@id"},"issued":{"@id":"cred:issued","@type":"xsd:dateTime"},"issuer":{"@id":"cred:issuer","@type":"@id"},"issuanceDate":{"@id":"cred:issuanceDate","@type":"xsd:dateTime"},"proof":{"@id":"sec:proof","@type":"@id","@container":"@graph"},"refreshService":{"@id":"cred:refreshService","@type":"@id","@context":{"@version":1.1,"@protected":true,"id":"@id","type":"@type","cred":"https://www.w3.org/2018/credentials#","ManualRefreshService2018":"cred:ManualRefreshService2018"}},"termsOfUse":{"@id":"cred:termsOfUse","@type":"@id"},"validFrom":{"@id":"cred:validFrom","@type":"xsd:dateTime"},"validUntil":{"@id":"cred:validUntil","@type":"xsd:dateTime"}}},"VerifiablePresentation":{"@id":"https://www.w3.org/2018/credentials#VerifiablePresentation","@context":{"@version":1.1,"@protected":true,"id":"@id","type":"@type","cred":"https://www.w3.org/2018/credentials#","sec":"https://w3id.org/security#","holder":{"@id":"cred:holder","@type":"@id"},"proof":{"@id":"sec:proof","@type":"@id","@container":"@graph"},"verifiableCredential":{"@id":"cred:verifiableCredential","@type":"@id","@container":"@graph"}}},"EcdsaSecp256k1Signature2019":{"@id":"https://w3id.org/security#EcdsaSecp256k1Signature2019","@context":{"@version":1.1,"@protected":true,"id":"@id","type":"@type","sec":"https://w3id.org/security#","xsd":"http://www.w3.org/2001/XMLSchema#","challenge":"sec:challenge","created":{"@id":"http://purl.org/dc/terms/created","@type":"xsd:dateTime"},"domain":"sec:domain","expires":{"@id":"sec:expiration","@type":"xsd:dateTime"},"jws":"sec:jws","nonce":"sec:nonce","proofPurpose":{"@id":"sec:proofPurpose","@type":"@vocab","@context":{"@version":1.1,"@protected":true,"id":"@id","type":"@type","sec":"https://w3id.org/security#","assertionMethod":{"@id":"sec:assertionMethod","@type":"@id","@container":"@set"},"authentication":{"@id":"sec:authenticationMethod","@type":"@id","@container":"@set"}}},"proofValue":"sec:proofValue","verificationMethod":{"@id":"sec:verificationMethod","@type":"@id"}}},"EcdsaSecp256r1Signature2019":{"@id":"https://w3id.org/security#EcdsaSecp256r1Signature2019","@context":{"@version":1.1,"@protected":true,"id":"@id","type":"@type","sec":"https://w3id.org/security#","xsd":"http://www.w3.org/2001/XMLSchema#","challenge":"sec:challenge","created":{"@id":"http://purl.org/dc/terms/created","@type":"xsd:dateTime"},"domain":"sec:domain","expires":{"@id":"sec:expiration","@type":"xsd:dateTime"},"jws":"sec:jws","nonce":"sec:nonce","proofPurpose":{"@id":"sec:proofPurpose","@type":"@vocab","@context":{"@version":1.1,"@protected":true,"id":"@id","type":"@type","sec":"https://w3id.org/security#","assertionMethod":{"@id":"sec:assertionMethod","@type":"@id","@container":"@set"},"authentication":{"@id":"sec:authenticationMethod","@type":"@id","@container":"@set"}}},"proofValue":"sec:proofValue","verificationMethod":{"@id":"sec:verificationMethod","@type":"@id"}}},"Ed25519Signature2018":{"@id":"https://w3id.org/security#Ed25519Signature2018","@context":{"@version":1.1,"@protected":true,"id":"@id","type":"@type","sec":"https://w3id.org/security#","xsd":"http://www.w3.org/2001/XMLSchema#","challenge":"sec:challenge","created":{"@id":"http://purl.org/dc/terms/created","@type":"xsd:dateTime"},"domain":"sec:domain","expires":{"@id":"sec:expiration","@type":"xsd:dateTime"},"jws":"sec:jws","nonce":"sec:nonce","proofPurpose":{"@id":"sec:proofPurpose","@type":"@vocab","@context":{"@version":1.1,"@protected":true,"id":"@id","type":"@type","sec":"https://w3id.org/security#","assertionMethod":{"@id":"sec:assertionMethod","@type":"@id","@container":"@set"},"authentication":{"@id":"sec:authenticationMethod","@type":"@id","@container":"@set"}}},"proofValue":"sec:proofValue","verificationMethod":{"@id":"sec:verificationMethod","@type":"@id"}}},"RsaSignature2018":{"@id":"https://w3id.org/security#RsaSignature2018","@context":{"@version":1.1,"@protected":true,"challenge":"sec:challenge","created":{"@id":"http://purl.org/dc/terms/created","@type":"xsd:dateTime"},"domain":"sec:domain","expires":{"@id":"sec:expiration","@type":"xsd:dateTime"},"jws":"sec:jws","nonce":"sec:nonce","proofPurpose":{"@id":"sec:proofPurpose","@type":"@vocab","@context":{"@version":1.1,"@protected":true,"id":"@id","type":"@type","sec":"https://w3id.org/security#","assertionMethod":{"@id":"sec:assertionMethod","@type":"@id","@container":"@set"},"authentication":{"@id":"sec:authenticationMethod","@type":"@id","@container":"@set"}}},"proofValue":"sec:proofValue","verificationMethod":{"@id":"sec:verificationMethod","@type":"@id"}}},"proof":{"@id":"https://w3id.org/security#proof","@type":"@id","@container":"@graph"}}}')},260:function(e,t,i){},266:function(e,t,i){"use strict";i.r(t);var n=i(0),a=i.n(n),r=i(59),c=i.n(r),o=(i(154),i(155),i(33)),s=(i(156),i.p+"static/media/verify-certificate.29230f43.png"),d=(i.p,i.p,i.p,i.p+"static/media/qr-code.0d1efb4c.svg"),u=i(3),p=i.n(u),l=i(13),h=i(48),f=(i(158),i.p+"static/media/certificate-valid.6e8564be.svg"),v=i.p+"static/media/certificate-invalid.a9ac96af.svg",g=(i.p,i(63)),m=i(272),y=i(148),b=(i(159),i(1)),j=function(e){var t=e.children,i=e.className,n=Object(y.a)(e,["children","className"]);return Object(b.jsx)("button",Object(l.a)(Object(l.a)({className:"custom-button ".concat(i)},n),{},{children:t}))},w=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var x={Name:{path:["credentialSubject","name"],format:function(e){return e}},Age:{path:["credentialSubject","age"],format:function(e){return e}},DOB:{path:["credentialSubject","dob"],format:function(e){return e},optional:!0},Gender:{path:["credentialSubject","gender"],format:function(e){return e}},"Certificate ID":{path:["evidence","0","certificateId"],format:function(e){return e}},"Beneficiary ID":{path:["credentialSubject","refId"],format:function(e){return e}},"Vaccine Name":{path:["evidence","0","vaccine"],format:function(e){return e}},"Vaccine Type":{path:["evidence","0","prophylaxis"],format:function(e){return e},optional:!0},"Date of ${dose} Dose":{path:["evidence","0","date"],format:function(e){return function(e){var t=new Date(e),i=t.getDate().toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),n=w[t.getMonth()],a=t.getFullYear();return"".concat(i,"-").concat(n,"-").concat(a)}(e)}},"Vaccination Status":{path:["evidence","0"],format:function(e){var t=parseInt(e.dose),i=parseInt(e.totalDoses)||2;return t>i?"Fully vaccinated and precaution dose administered":t<i?"Partially Vaccinated":"Fully Vaccinated"}},"Vaccination at":{path:["evidence","0","facility","name"],format:function(e){return e}},"Country of Vaccination":{path:["evidence","0","facility","address","addressCountry"],format:function(e){return e},optional:!0}},O=i(62),S=i(147),M=i(61),U=i.n(M),E="ADD_EVENT",N="REMOVE_EVENT",I="valid-verification",C="invalid-verification",T="revoked-certificate",D={data:[]};var k=function(e){return{type:E,payload:Object(l.a)(Object(l.a)({},e),{},{date:(new Date).toISOString()})}},V=i(273);var P=i.p+"static/media/loading.68d0272c.gif",L=(i(184),function(){return Object(b.jsx)("div",{className:"loader-wrapper",children:Object(b.jsx)("img",{src:P})})}),R=i(185),A=i(54).RSAKeyPair,J=i(35).documentLoaders.node,B=i(65).contexts,F=i(255),X=i(256),K=X.vaccinationContext,G=X.vaccinationContextV2,_=function(e){var t={"did:india":g.certificatePublicKey,"https://example.com/i/india":g.certificatePublicKey,"https://w3id.org/security/v1":B.get("https://w3id.org/security/v1"),"https://www.w3.org/2018/credentials#":F,"https://www.w3.org/2018/credentials/v1":F,"https://cowin.gov.in/credentials/vaccination/v1":K,"https://cowin.gov.in/credentials/vaccination/v2":G}[e];return void 0===t&&(t=B[e]),void 0!==t?{contextUrl:null,documentUrl:e,document:t}:e.startsWith("{")?JSON.parse(e):J()(e)};var q=function(e){var t=e.certificateData,i=(e.goBack,Object(n.useState)(!1)),a=Object(o.a)(i,2),r=a[0],c=a[1],s=Object(n.useState)(!1),d=Object(o.a)(s,2),u=d[0],y=d[1],w=Object(n.useState)({}),S=Object(o.a)(w,2),M=S[0],E=S[1],N=(Object(V.a)(),Object(O.b)());function D(e){return P.apply(this,arguments)}function P(){return(P=Object(h.a)(p.a.mark((function e(i){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U.a.post("/cert/api/certificate/revoked",i).then((function(e){return N(k({type:T,extra:t})),e})).catch((function(e){return e})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){function e(){return(e=Object(h.a)(p.a.mark((function e(){var i,n,a,r,o,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=JSON.parse(t),n={"@context":R.SECURITY_CONTEXT_URL,id:"did:india",type:"RsaVerificationKey2018",controller:"https://cowin.gov.in/",publicKeyPem:g.certificatePublicKey},a={"@context":R.SECURITY_CONTEXT_URL,id:"https://cowin.gov.in/",publicKey:[n],assertionMethod:[n.id]},r=new A(Object(l.a)({},n)),o=R.purposes.AssertionProofPurpose,s=R.suites.RsaSignature2018,e.next=9,R.verify(i,{suite:new s({key:r}),purpose:new o({controller:a}),documentLoader:_,compactProof:!1});case 9:if(!e.sent.verified){e.next=20;break}return e.next=13,D(i);case 13:if(200===e.sent.response.status){e.next=20;break}return y(!0),E(i),N(k({type:I,extra:i.credentialSubject})),c(!1),e.abrupt("return");case 20:N(k({type:C,extra:i})),y(!1),c(!1),e.next=30;break;case 25:e.prev=25,e.t0=e.catch(0),y(!1),N(k({type:C,extra:t})),c(!1);case 30:case"end":return e.stop()}}),e,null,[[0,25]])})))).apply(this,arguments)}c(!0),setTimeout((function(){!function(){e.apply(this,arguments)}()}),500)}),[]),r?Object(b.jsx)(L,{}):Object(b.jsxs)("div",{className:"certificate-status-wrapper",children:[Object(b.jsx)("img",{src:u?f:v,alt:"",className:"certificate-status-image"}),Object(b.jsx)("h3",{className:"certificate-status",children:u?"Certificate Successfully Verified":"Certificate Invalid"}),Object(b.jsx)("br",{}),u&&Object(b.jsx)("h5",{children:function(e){return e&&e.evidence?"Certificate for COVID-19 Vaccination":""}(M)}),u&&Object(b.jsx)("table",{className:"mt-3",children:Object.keys(x).map((function(e,t){var i=x[e],n=i.format(Object(m.a)("NA",i.path,M));return"Fully Vaccinated"===n?("NA"!==n||"NA"===n&&!i.optional)&&Object(b.jsx)("tr",{style:{fontSize:"smaller",textAlign:"left"},children:Object(b.jsx)("td",{className:"font-weight-bolder value-col text-center",children:n+", you can enter!"})},t):"Partially Vaccinated"===n?("NA"!==n||"NA"===n&&!i.optional)&&Object(b.jsx)("tr",{style:{fontSize:"smaller",textAlign:"left"},children:Object(b.jsx)("td",{className:"font-weight-bolder value-col text-center",style:{backgroundColor:0},children:"Your second dose is pending! Sorry, you are not allowed."})},t):void 0}))}),Object(b.jsx)("br",{}),Object(b.jsx)(j,{className:"blue-btn m-3",onLoad:void setTimeout((function(){window.location.href="/"}),7e3),children:"Page will be reloaded in 5sec"}),Object(b.jsx)("br",{}),!u&&Object(b.jsx)("h5",{children:Object(b.jsx)("a",{href:"https://www.cowin.gov.in",children:"Your certificate is not valid!"})})]})},Q=i(143),W=i(144),Y=i(149),z=i(146),Z=(i(260),i(92));var H=function(e){Object(Y.a)(i,e);var t=Object(z.a)(i);function i(e){var n;return Object(Q.a)(this,i),(n=t.call(this,e)).scanBarcode=Object(h.a)(p.a.mark((function e(){var t,i,a,r,c,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=document.createElement("canvas")).width=n.props.width,t.height=n.props.height,(i=t.getContext("2d")).drawImage(n.video,0,0,n.props.width,n.props.height),a=i.getImageData(0,0,t.width,t.height),e.next=8,Object(Z.scanImageData)(a);case 8:for(r=e.sent,Object(Z.scanImageData)(a),c=0;c<r.length;++c)o=r[c],n.props.onScan(o.decode());case 11:case"end":return e.stop()}}),e)}))),n.state={hasUserMedia:!1},n}return Object(W.a)(i,[{key:"componentDidMount",value:function(){var e=this;(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)&&(i.mountedInstances.push(this),this.state.hasUserMedia||i.userMediaRequested||this.requestUserMedia(),i.scanTimer=setInterval((function(){e.scanBarcode()}),100))}},{key:"componentWillUpdate",value:function(e){JSON.stringify(e.videoConstraints)!==JSON.stringify(this.props.videoConstraints)&&this.requestUserMedia()}},{key:"componentWillUnmount",value:function(){clearInterval(i.scanTimer);var e=i.mountedInstances.indexOf(this);i.mountedInstances.splice(e,1),i.userMediaRequested=!1,0===i.mountedInstances.length&&this.state.hasUserMedia&&(this.stream.getVideoTracks&&this.stream.getAudioTracks?this.stream.getVideoTracks().map((function(e){return e.stop()})):this.stream.stop(),window.URL.revokeObjectURL(this.state.src))}},{key:"requestUserMedia",value:function(){var e=this;navigator.getUserMedia=navigator.mediaDevices.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var t=function(e){var t={video:e||!0};navigator.mediaDevices.getUserMedia(t).then((function(e){i.mountedInstances.forEach((function(t){return t.handleUserMedia(null,e)}))})).catch((function(e){i.mountedInstances.forEach((function(t){return t.handleUserMedia(e)}))}))};if("mediaDevices"in navigator)t(this.props.videoConstraints);else{MediaStreamTrack.getSources((function(i){var n=null;i.forEach((function(e){"video"===e.kind&&(n=e.id)}));var a=function(e){var t=(e||{}).deviceId;return"string"===typeof t?t:Array.isArray(t)&&t.length>0?t[0]:"object"===typeof t&&t.ideal?t.ideal:null}(e.props.videoConstraints);a&&(n=a),t({optional:[{sourceId:n}]})}))}i.userMediaRequested=!0}},{key:"handleUserMedia",value:function(e,t){if(e)return this.setState({hasUserMedia:!1}),void this.props.onError(e);this.stream=t;try{this.video.srcObject=t,this.setState({hasUserMedia:!0})}catch(i){this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(t)})}}},{key:"render",value:function(){var e=this;return Object(b.jsxs)("div",{id:"videoview",children:[Object(b.jsx)("video",{autoPlay:!0,width:"100%",src:this.state.src,className:this.props.className,playsInline:!0,style:this.props.style,ref:function(t){e.video=t}}),Object(b.jsx)("canvas",{id:"overlay",width:this.props.width,height:this.props.height})]})}}]),i}(n.Component);H.defaultProps={className:"",height:1e3,width:1e3,videoConstraints:{facingMode:"environment"}},H.mountedInstances=[],H.userMediaRequested=!1,H.scanTimer=null;var $=i(145),ee=i.n($),te=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),i=t[0],a=t[1],r=Object(n.useState)(!1),c=Object(o.a)(r,2),u=c[0],p=c[1];return Object(b.jsxs)("div",{className:"container-fluid verify-certificate-wrapper screen-width",style:{width:700},children:[!i&&Object(b.jsxs)(b.Fragment,{children:[!u&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("img",{src:s,className:"banner-img",alt:"banner-img"}),Object(b.jsx)(j,{className:"green-btn",onLoad:function(){return p(!0)},children:Object(b.jsx)("img",{className:"ml-3",src:d,alt:""})})]}),u&&Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(H,{onError:function(e){console.error(e)},onScan:function(e){e&&(new ee.a).loadAsync(e).then((function(e){return e.files["certificate.json"].async("text")})).then((function(e){a(e)})).catch((function(t){a(e)}))}})}),Object(b.jsx)("div",{children:"Make Sure QR Code is visible in whole box, after showing the QR code please wait for a moment."})]}),i&&Object(b.jsx)(q,{certificateData:i,goBack:function(){p(!1),a("")}})]})},ie=i(40),ne=Object(ie.b)({events:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(l.a)(Object(l.a)({},e),{},{data:[].concat(Object(S.a)(e.data),[Object(l.a)({id:e.data.length},t.payload)])});case N:return Object(l.a)(Object(l.a)({},e),{},{data:e.data.filter((function(e){return!t.payload.includes(e.id)}))});default:return e}}}),ae=(function(){try{var e=localStorage.getItem("state");if(null===e)return;JSON.parse(e)}catch(t){return}}(),Object(ie.c)(ne,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));var re=function(){return Object(b.jsx)(O.a,{store:ae,children:Object(b.jsx)("div",{className:"App",children:Object(b.jsx)(te,{})})})},ce=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,274)).then((function(t){var i=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,c=t.getTTFB;i(e),n(e),a(e),r(e),c(e)}))};i(265);c.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(re,{})}),document.getElementById("root")),ce()},39:function(e,t){},45:function(e,t){},63:function(e){e.exports=JSON.parse('{"urlPath":"/certificate","certificatePublicKey":"-----BEGIN PUBLIC KEY-----\\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA0i7R4XsyG3m6KD36qKEVxE+odCh68W2O4vLqh6SnsgItzvLYvJKPai+jEkf22FlPn0QnGo+Znyi6dw1lhvg9FGXqodv33yrqKhGLkQPeURaMnJidxktK/3QLXuv9HiKq9fSDLJyPBJEFCCCiZNTGgWM0dqq43/XRi+7IX3gWU68U6v/7EyOW3U4ZgYUVlfwbUh6eKRan68/TObQua39oeUfDMhJa0NHnMXb1lq/vQIjEgGkOK5LLyz+X8ETUEhn8Qdx2SIORmftCPW4XO0UZmMHuGw9t+UUgniy5BL8kmvtjpVRWFUliJFGBTvBZCO6gcoX5eXi8LytCg+mJ6EDO+QIDAQAB\\n-----END PUBLIC KEY-----\\n"}')},78:function(e,t){},83:function(e,t){},84:function(e,t){},87:function(e,t){}},[[266,1,2]]]);
//# sourceMappingURL=main.810e88e9.chunk.js.map